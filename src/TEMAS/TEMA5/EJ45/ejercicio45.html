<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Práctica: Tiempo en Almassora</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
      body { font-family: Arial, sans-serif; line-height: 1.5; }
      code { background: #eee; padding: 2px 4px; }
      .box { background: #f4f4f4; padding: 10px; border-left: 4px solid #0077cc; margin: 10px 0; }
  </style>
</head>
<body>

<h1>Práctica API del Tiempo (Open-Meteo)</h1>

<h2>Tiempo actual</h2>

<select id="ciudad">
  <option value="almassora">Almassora</option>
  <option value="castellon">Castellon</option>
  <option value="valencia">Valencia</option>
  <option value="benicassim">Benicassim</option>

</select>

<button id="btnActual">Mostrar tiempo actual</button>
<div id="resultadoActual" class="box"></div>

<script>
  $(function() {
    const coords = {
      almassora: { lat: 39.947843, lon: -0.062999 },
      castellon: { lat: 39.986068, lon: -0.036024 },
      valencia: { lat: 39.4561165, lon: -0.3545661 },
      benicassim: { lat: 40.055278, lon: 0.064167 }
    }


    $("#btnActual").click(function() {

      const ciudadSelecionada=$("#ciudad").val();
      const lat=coords[ciudadSelecionada].lat;
      const lon=coords[ciudadSelecionada].lon;

      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const cw = data.current_weather;
          $("#resultadoActual").html(`
                     <b>Tiempo actual en ${ciudadSelecionada}:</b><br>
                     Temperatura: ${cw.temperature} ºC<br>
                     Viento: ${cw.windspeed} km/h<br>
                     Dirección del viento: ${cw.winddirection}º<br>
                     Hora del dato: ${cw.time}
                     `);

        });
    });
  });
</script>


</body>
</html>